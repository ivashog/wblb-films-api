# Migration `20200909150640-refactor-films-and-actors-table`

This migration has been generated by Olexiy Ivashkin at 9/9/2020, 6:06:40 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."actors" DROP COLUMN "films_count"

ALTER TABLE "public"."films" ADD COLUMN "updated_at" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200904151526-add-unique-to-film-format-name..20200909150640-refactor-films-and-actors-table
--- datamodel.dml
+++ datamodel.dml
@@ -1,30 +1,31 @@
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
 generator client {
   provider = "prisma-client-js"
+  previewFeatures = ["connectOrCreate", "atomicNumberOperations", "insensitiveFilters"]
 }
-datasource db {
-  provider = "postgresql"
-  url = "***"
-}
-
 model Actor {
   id         Int      @id @default(autoincrement())
   fullName   String   @unique @map("full_name")
-  filmsCount Int      @default(1) @map("films_count")
   createdAt  DateTime @default(now()) @map("created_at")
   updatedAt  DateTime @updatedAt @map("updated_at")
   films      Film[]   @relation("actors_to_films")
   @@map("actors")
 }
 model Film {
-  id          Int         @default(autoincrement())@id
+  id          Int         @default(autoincrement()) @id
   name        String
   releaseYear Int         @map("release_year")
   formatId    Int?        @map("format_id")
   createdAt   DateTime    @default(now()) @map("created_at")
+  updatedAt   DateTime    @updatedAt @default(now()) @map("updated_at")
   format      FilmFormat? @relation(fields: [formatId], references: [id])
   actors      Actor[]     @relation("actors_to_films")
   @@index([name])
```


